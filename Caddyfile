# Caddyfile
:8080 {
    # Requests for raw data go to the data
    handle_path /api/bars* {
        reverse_proxy http://data:8090
    }
    handle_path /api/trades* {
        reverse_proxy http://data:8090
    }
    
    # Requests for analysis go to the analytics
    handle_path /api/vwap* {
        reverse_proxy http://analytics:8091
    }
    handle_path /api/indicators* {
        reverse_proxy http://analytics:8091
    }
    handle_path /api/context* {
        reverse_proxy http://analytics:8091
    }

    # Health checks can go anywhere
    handle_path /health* {
        reverse_proxy http://data:8090
    }
}